<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Archive Download</title>
        <style>
            * {
                font-family: 'Courier New', Courier, monospace;
            }
            tr#title {
                text-align: left;
            }
        </style>
    </head>
    <body>
        <h2>Archive Download</h2>
        <h3>Download file that I might never fucking use.</h3>
        <span id="luo"></span>
        <p>If you feel like this is too ugly, you can just <a href="/download.html?id=696-420-911-666">Click here</a> and it will redirect you back to the download page.</p>
        <hr>
        <table id="display" style="border-spacing: 10px;">
            <thead>
                <tr id="title">
                    <th>File Name</th>
                    <th>Size</th>
                    <th>Last Modified</th>
                    <th>IsDirectory?</th>
                </tr>
            </thead>
            <tbody id="main_content"></tbody>
        </table>
    </body>
    <script>
        function get() {
            fetch("file_listing.json")
                .then(e => e.json())
                .then(e_ => {
                    if (e_.type == "dir_listing") {
                        e_.list.forEach((v) => {
                            var row = document.createElement("tr"),
                                filename = document.createElement("td"),
                                filesize = document.createElement("td"),
                                modtime = document.createElement("td"),
                                isdir = document.createElement("td"),
                                link = document.createElement("a")
                            link.innerHTML = v.filename;
                            link.download = v.filename;
                            link.href = v.filename;
                            filename.append(link);
                            filesize.innerHTML = v.filesize;
                            modtime.innerHTML = v.mod_time;
                            isdir.innerHTML = v.isdir;
                            document.getElementById("luo").innerHTML = `Last updated on: ${e_.last_updated_on}`
                            row.append(filename)
                            row.append(filesize)
                            row.append(modtime)
                            row.append(isdir)
                            document.getElementById("main_content").append(row);
                        })
                    }
                })
        }
        get();
    </script>
</html>