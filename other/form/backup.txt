<!DOCTYPE html>
<html lang="en">
    <head>
        <style>
            
            html, body {
                height:100%;
                width:100%;
                margin:0;
                padding:0;
            }
            label {
                font-weight:bold;
                margin-right:10px;
            }
            .table {
                display:table;
                text-align:center;
                width:100%;
                height:100%;
                table-layout:fixed;
            }
            .cell {
                display:table-cell;
                vertical-align:middle;
            }
            form {
                display:inline-block;
                border:8px solid black;
                width: 450px;
                padding:50px 0;
                background: rgb(107, 107, 107);
            }
            input {
                margin-bottom:15px;
            }
        </style>
        <title>Login</title>
    </head>
    <body>
        <div class='table'>
            <div class='cell'>
                
                <div class="container">
                    <p>Login Page</p>
                    <label>ID: </label><input type="text" id="id1" size="5" maxlength="5" />-<input type="text" id="id2" size="5" maxlength="5" />-<input type="text" id="id3" size="5" maxlength="5" />-<input type="text" id="id4" size="5" maxlength="5" />-<input type="text" id="id5" size="5" maxlength="5" />
                    <br />
                    <button onclick="process()">Login</button>
                    <button onclick="register()">Register</button>
                    <p>To continue, please enter your ID</p>
                </div>
            </div>
            <script>
                var container = document.getElementsByClassName("container")[0];
                container.onkeyup = function(e) {
                    var target = e.srcElement || e.target;
                    var maxLength = parseInt(target.attributes["maxlength"].value, 10);
                    var myLength = target.value.length;
                    if (myLength >= maxLength) {
                        var next = target;
                        while (next = next.nextElementSibling) {
                            if (next == null)
                                break;
                            if (next.tagName.toLowerCase() === "input") {
                                next.focus();
                                break;
                            }   
                        }
                    }
                    // Move to previous field if empty (user pressed backspace)
                    else if (myLength === 0) {
                        var previous = target;
                        while (previous = previous.previousElementSibling) {
                            if (previous == null)
                                break;
                            if (previous.tagName.toLowerCase() === "input") {
                                previous.focus();
                                break;
                            }
                        }
                    }
                }
                function process() {
                    if (document.getElementById("id1").value == '' || document.getElementById("id2").value == '' || document.getElementById("id3").value == '' || document.getElementById("id4").value == '' || document.getElementById("id5").value == '') {
                        alert("Do not leave the ID blank");
                        return false;
                    }
                    var id = document.getElementById("id1").value + document.getElementById("id2").value + document.getElementById("id3").value + document.getElementById("id4").value + document.getElementById("id5").value;
                    const array1 = [...id];
                    for (var i1 = 0; i1 < id.length + 1; i1++) {
                        if (array1[i1] == "0") { array1[i1] = 27; }
                        if (array1[i1] == "1") { array1[i1] = 28; }
                        if (array1[i1] == "2") { array1[i1] = 29; }
                        if (array1[i1] == "3") { array1[i1] = 30; }
                        if (array1[i1] == "4") { array1[i1] = 31; }
                        if (array1[i1] == "5") { array1[i1] = 32; }
                        if (array1[i1] == "6") { array1[i1] = 33; }
                        if (array1[i1] == "7") { array1[i1] = 34; }
                        if (array1[i1] == "8") { array1[i1] = 35; }
                        if (array1[i1] == "9") { array1[i1] = 36; }
						if (array1[i1] == "a" || array1[i1] == "A") { array1[i1] = 01; }
						if (array1[i1] == "b" || array1[i1] == "B") { array1[i1] = 02; }
						if (array1[i1] == "c" || array1[i1] == "C") { array1[i1] = 03; }
						if (array1[i1] == "d" || array1[i1] == "D") { array1[i1] = 04; }
						if (array1[i1] == "e" || array1[i1] == "E") { array1[i1] = 05; }
						if (array1[i1] == "f" || array1[i1] == "F") { array1[i1] = 06; }
						if (array1[i1] == "g" || array1[i1] == "G") { array1[i1] = 07; }
						if (array1[i1] == "h" || array1[i1] == "H") { array1[i1] = 08; }
						if (array1[i1] == "i" || array1[i1] == "I") { array1[i1] = 09; }
						if (array1[i1] == "j" || array1[i1] == "J") { array1[i1] = 10; }
						if (array1[i1] == "k" || array1[i1] == "K") { array1[i1] = 11; }
						if (array1[i1] == "l" || array1[i1] == "L") { array1[i1] = 12; }
						if (array1[i1] == "m" || array1[i1] == "M") { array1[i1] = 13; }
						if (array1[i1] == "n" || array1[i1] == "N") { array1[i1] = 14; }
						if (array1[i1] == "o" || array1[i1] == "O") { array1[i1] = 15; }
						if (array1[i1] == "p" || array1[i1] == "P") { array1[i1] = 16; }
						if (array1[i1] == "q" || array1[i1] == "Q") { array1[i1] = 17; }
						if (array1[i1] == "r" || array1[i1] == "R") { array1[i1] = 18; }
						if (array1[i1] == "s" || array1[i1] == "S") { array1[i1] = 19; }
						if (array1[i1] == "t" || array1[i1] == "T") { array1[i1] = 20; }
						if (array1[i1] == "u" || array1[i1] == "U") { array1[i1] = 21; }
						if (array1[i1] == "v" || array1[i1] == "V") { array1[i1] = 22; }
						if (array1[i1] == "w" || array1[i1] == "W") { array1[i1] = 23; }
						if (array1[i1] == "x" || array1[i1] == "X") { array1[i1] = 24; }
						if (array1[i1] == "y" || array1[i1] == "Y") { array1[i1] = 25; }
						if (array1[i1] == "z" || array1[i1] == "Z") { array1[i1] = 26; }
                    }
                    var data_1 = array1[0] + array1[1] + array1[2] + array1[3] + array1[4] + array1[5];
                    var data_2 = array1[6] + array1[7] + array1[8] + array1[9] + array1[10] + array1[11];
                    var data_3 = array1[12] + array1[13] + array1[14] + array1[15] + array1[16] + array1[17];
                    var data_4 = array1[18] + array1[19] + array1[20] + array1[21] + array1[22] + array1[23];
                    var data_total_1 = Math.abs(data_1 + data_2);
                    var data_total_2 = Math.abs(data_3 - data_4);
                    var data_total = data_total_1 * data_total_2;
                    while (data_total >= 10) {
                        data_total = data_total / 10;
                    }
                    var data_total_end = Math.floor(Math.abs(data_total));
                    if (data_total_end == 0) {
                        data_total_end = 1;
                    }
                    //console.log(array1 + 'END OF ARRAY' + data_1 + ', ' + data_2 + ', ' + data_3 + ', ' + data_4 + ', ' + data_total_1 + ', ' + data_total_2 + ', ' + data_total + ', ' + data_total_end);
                    console.log(data_total_end + ', ' + array1[24]);
                    console.log(array1);
                    if (array1[24] == data_total_end) {
                        var xhttp = new XMLHttpRequest();
                        xhttp.onreadystatechange = function() {
                            if (this.readyState == 4 && this.status == 200) {
                                myFunction(this);
                            }
                        };
                        xhttp.open("GET", "data.xml", true);
                        xhttp.send();
                        function myFunction(xml) {
                            var xmlDoc = xml.responseXML;
                            var token1 = xmlDoc.getElementsByTagName("token")[0].childNodes[0].nodeValue;
                            sessionStorage.setItem("token12", token1);
                            console.log("sessionStorage.getItem(token12) = " + sessionStorage.getItem("token12"));
                        }
                        //Start
                            const array2 = [...id];
                            for (var i2 = 0; i2 < id.length + 1; i2++) {
								if (array2[i2] == "0") { array2[i2] = 27; }
								if (array2[i2] == "1") { array2[i2] = 28; }
								if (array2[i2] == "2") { array2[i2] = 29; }
								if (array2[i2] == "3") { array2[i2] = 30; }
								if (array2[i2] == "4") { array2[i2] = 31; }
								if (array2[i2] == "5") { array2[i2] = 32; }
								if (array2[i2] == "6") { array2[i2] = 33; }
								if (array2[i2] == "7") { array2[i2] = 34; }
								if (array2[i2] == "8") { array2[i2] = 35; }
								if (array2[i2] == "9") { array2[i2] = 36; }
								if (array2[i2] == "a" || array2[i2] == "A") { array2[i2] = 01; }
								if (array2[i2] == "b" || array2[i2] == "B") { array2[i2] = 02; }
								if (array2[i2] == "c" || array2[i2] == "C") { array2[i2] = 03; }
								if (array2[i2] == "d" || array2[i2] == "D") { array2[i2] = 04; }
								if (array2[i2] == "e" || array2[i2] == "E") { array2[i2] = 05; }
								if (array2[i2] == "f" || array2[i2] == "F") { array2[i2] = 06; }
								if (array2[i2] == "g" || array2[i2] == "G") { array2[i2] = 07; }
								if (array2[i2] == "h" || array2[i2] == "H") { array2[i2] = 08; }
								if (array2[i2] == "i" || array2[i2] == "I") { array2[i2] = 09; }
								if (array2[i2] == "j" || array2[i2] == "J") { array2[i2] = 10; }
								if (array2[i2] == "k" || array2[i2] == "K") { array2[i2] = 11; }
								if (array2[i2] == "l" || array2[i2] == "L") { array2[i2] = 12; }
								if (array2[i2] == "m" || array2[i2] == "M") { array2[i2] = 13; }
								if (array2[i2] == "n" || array2[i2] == "N") { array2[i2] = 14; }
								if (array2[i2] == "o" || array2[i2] == "O") { array2[i2] = 15; }
								if (array2[i2] == "p" || array2[i2] == "P") { array2[i2] = 16; }
								if (array2[i2] == "q" || array2[i2] == "Q") { array2[i2] = 17; }
								if (array2[i2] == "r" || array2[i2] == "R") { array2[i2] = 18; }
								if (array2[i2] == "s" || array2[i2] == "S") { array2[i2] = 19; }
								if (array2[i2] == "t" || array2[i2] == "T") { array2[i2] = 20; }
								if (array2[i2] == "u" || array2[i2] == "U") { array2[i2] = 21; }
								if (array2[i2] == "v" || array2[i2] == "V") { array2[i2] = 22; }
								if (array2[i2] == "w" || array2[i2] == "W") { array2[i2] = 23; }
								if (array2[i2] == "x" || array2[i2] == "X") { array2[i2] = 24; }
								if (array2[i2] == "y" || array2[i2] == "Y") { array2[i2] = 25; }
								if (array2[i2] == "z" || array2[i2] == "Z") { array2[i2] = 26; }
							}
                            /*var encrypt_text1 = array2[0] + array2[1] + array2[2] + array2[3] +
                                                array2[4] + array2[5] + array2[6] + array2[7] + 
                                                array2[8] + array2[9] + array2[10] + array2[11];
                            var key1 =  array2[12] + array2[13] + array2[14] + array2[15] + 
                                        array2[16] + array2[17] + array2[18] + array2[19] + 
                                        array2[20] + array2[21] + array2[22] + array2[23];*/
                            encrypt_text = array2.slice(0, 12);
                            key = array2.slice(12, 24);
                            //const encrypt_text = [...encrypt_text1];
                            //const key = [...key1];     
                            console.log(encrypt_text, key);
                            var output = '';
                            for (var i3 = 0; i3 < 12; i3++) {
								if (encrypt_text[i3] + key[i3] - 1 < 37) {
									//var output = output + encrypt_text[i3] + key[i3] - 1;
									//Convert the number back to letter
                                    console.log(encrypt_text[i3] + key[i3] - 1);
                                    if (encrypt_text[i3] + key[i3] - 1 == 27) {var output = output + "0";}
                                    if (encrypt_text[i3] + key[i3] - 1 == 28) {var output = output + "1";}
                                    if (encrypt_text[i3] + key[i3] - 1 == 29) {var output = output + "2";}
                                    if (encrypt_text[i3] + key[i3] - 1 == 30) {var output = output + "3";}
                                    if (encrypt_text[i3] + key[i3] - 1 == 31) {var output = output + "4";}
                                    if (encrypt_text[i3] + key[i3] - 1 == 32) {var output = output + "5";}
                                    if (encrypt_text[i3] + key[i3] - 1 == 33) {var output = output + "6";}
                                    if (encrypt_text[i3] + key[i3] - 1 == 34) {var output = output + "7";}
                                    if (encrypt_text[i3] + key[i3] - 1 == 35) {var output = output + "8";}
                                    if (encrypt_text[i3] + key[i3] - 1 == 36) {var output = output + "9";}
									if (encrypt_text[i3] + key[i3] - 1 == 1) {var output = output + "a";}
									if (encrypt_text[i3] + key[i3] - 1 == 2) {var output = output + "b";}
									if (encrypt_text[i3] + key[i3] - 1 == 3) {var output = output + "c";}
									if (encrypt_text[i3] + key[i3] - 1 == 4) {var output = output + "d";}
									if (encrypt_text[i3] + key[i3] - 1 == 5) {var output = output + "e";}
									if (encrypt_text[i3] + key[i3] - 1 == 6) {var output = output + "f";}
									if (encrypt_text[i3] + key[i3] - 1 == 7) {var output = output + "g";}
									if (encrypt_text[i3] + key[i3] - 1 == 8) {var output = output + "h";}
									if (encrypt_text[i3] + key[i3] - 1 == 9) {var output = output + "i";}
									if (encrypt_text[i3] + key[i3] - 1 == 10) {var output = output + "j";}
									if (encrypt_text[i3] + key[i3] - 1 == 11) {var output = output + "k";}
									if (encrypt_text[i3] + key[i3] - 1 == 12) {var output = output + "l";}
									if (encrypt_text[i3] + key[i3] - 1 == 13) {var output = output + "m";}
									if (encrypt_text[i3] + key[i3] - 1 == 14) {var output = output + "n";}
									if (encrypt_text[i3] + key[i3] - 1 == 15) {var output = output + "o";}
									if (encrypt_text[i3] + key[i3] - 1 == 16) {var output = output + "p";}
									if (encrypt_text[i3] + key[i3] - 1 == 17) {var output = output + "q";}
									if (encrypt_text[i3] + key[i3] - 1 == 18) {var output = output + "r";}
									if (encrypt_text[i3] + key[i3] - 1 == 19) {var output = output + "s";}
									if (encrypt_text[i3] + key[i3] - 1 == 20) {var output = output + "t";}
									if (encrypt_text[i3] + key[i3] - 1 == 21) {var output = output + "u";}
									if (encrypt_text[i3] + key[i3] - 1 == 22) {var output = output + "v";}
									if (encrypt_text[i3] + key[i3] - 1 == 23) {var output = output + "w";}
									if (encrypt_text[i3] + key[i3] - 1 == 24) {var output = output + "x";}
									if (encrypt_text[i3] + key[i3] - 1 == 25) {var output = output + "y";}
									if (encrypt_text[i3] + key[i3] - 1 == 26) {var output = output + "z";}
								} else {
									//var output = output + encrypt_text[i3] + key[i3] - 37;
									//Convert the number back to letter
                                    console.log(encrypt_text[i3] + key[i3] - 37);
                                    if (encrypt_text[i3] + key[i3] - 37 == 27) {var output = output + "0";}
                                    if (encrypt_text[i3] + key[i3] - 37 == 28) {var output = output + "1";}
                                    if (encrypt_text[i3] + key[i3] - 37 == 29) {var output = output + "2";}
                                    if (encrypt_text[i3] + key[i3] - 37 == 30) {var output = output + "3";}
                                    if (encrypt_text[i3] + key[i3] - 37 == 31) {var output = output + "4";}
                                    if (encrypt_text[i3] + key[i3] - 37 == 32) {var output = output + "5";}
                                    if (encrypt_text[i3] + key[i3] - 37 == 33) {var output = output + "6";}
                                    if (encrypt_text[i3] + key[i3] - 37 == 34) {var output = output + "7";}
                                    if (encrypt_text[i3] + key[i3] - 37 == 35) {var output = output + "8";}
                                    if (encrypt_text[i3] + key[i3] - 37 == 36) {var output = output + "9";}
									if (encrypt_text[i3] + key[i3] - 37 == 1) {var output = output + "a";}
									if (encrypt_text[i3] + key[i3] - 37 == 2) {var output = output + "b";}
									if (encrypt_text[i3] + key[i3] - 37 == 3) {var output = output + "c";}
									if (encrypt_text[i3] + key[i3] - 37 == 4) {var output = output + "d";}
									if (encrypt_text[i3] + key[i3] - 37 == 5) {var output = output + "e";}
									if (encrypt_text[i3] + key[i3] - 37 == 6) {var output = output + "f";}
									if (encrypt_text[i3] + key[i3] - 37 == 7) {var output = output + "g";}
									if (encrypt_text[i3] + key[i3] - 37 == 8) {var output = output + "h";}
									if (encrypt_text[i3] + key[i3] - 37 == 9) {var output = output + "i";}
									if (encrypt_text[i3] + key[i3] - 37 == 10) {var output = output + "j";}
									if (encrypt_text[i3] + key[i3] - 37 == 11) {var output = output + "k";}
									if (encrypt_text[i3] + key[i3] - 37 == 12) {var output = output + "l";}
									if (encrypt_text[i3] + key[i3] - 37 == 13) {var output = output + "m";}
									if (encrypt_text[i3] + key[i3] - 37 == 14) {var output = output + "n";}
									if (encrypt_text[i3] + key[i3] - 37 == 15) {var output = output + "o";}
									if (encrypt_text[i3] + key[i3] - 37 == 16) {var output = output + "p";}
									if (encrypt_text[i3] + key[i3] - 37 == 17) {var output = output + "q";}
									if (encrypt_text[i3] + key[i3] - 37 == 18) {var output = output + "r";}
									if (encrypt_text[i3] + key[i3] - 37 == 19) {var output = output + "s";}
									if (encrypt_text[i3] + key[i3] - 37 == 20) {var output = output + "t";}
									if (encrypt_text[i3] + key[i3] - 37 == 21) {var output = output + "u";}
									if (encrypt_text[i3] + key[i3] - 37 == 22) {var output = output + "v";}
									if (encrypt_text[i3] + key[i3] - 37 == 23) {var output = output + "w";}
									if (encrypt_text[i3] + key[i3] - 37 == 24) {var output = output + "x";}
									if (encrypt_text[i3] + key[i3] - 37 == 25) {var output = output + "y";}
									if (encrypt_text[i3] + key[i3] - 37 == 26) {var output = output + "z";}
								}
							}
                            //alert(output);
                            setTimeout(function() {
                                console.log("sessionStorage.getItem(token12) v2 = " + sessionStorage.getItem("token12"));
                                var token1_1 = sessionStorage.getItem("token12");
                                console.log(token1_1 + ' ' + output)
                                if (token1_1 == output) {
                                    alert("Access Granted!");
                                    sessionStorage.removeItem("token12");
                                } else {
                                    alert("Access Denied!");
                                    sessionStorage.removeItem("token12");
                                }
                            }, 1000);
                            
                        //End
                    } else {
                        alert("Invalid ID!");
                    }
                }
                function register() {
                    window.location.replace("register.html");
                }
            </script>
        </div>
    </body>
</html>
